# QiwiTest
Тестовое задание на вакансию Android разработчик

Задание

Необходимо реализовать приложение для платформы Android версии 4.0 и выше.

Приложение должно быть написано на языке Java с использованием Android SDK используя любую официально поддерживаемую IDE. APK файл должен быть упакован в ZIP архив вместе с исходным кодом проекта. APK файл должен запускаться на любом устройстве с Android 4.0 и выше, будь это планшет или телефон. Приложение должно адекватно обрабатывать все возможные исключения, уведомляя об этом пользователя соответствующим сообщением, а так же правильно работать с интерфейсом во время смены ориентации, в том числе если в этот момент в фоне происходит загрузка каких-либо данных (использовать атрибут android:configChanges в манифесте запрещено). Исходный код может не содержать каких-либо комментариев, но при этом он должен быть логичен, понятен и легок для восприятия даже без комментариев.

Приложение должно запрашивать список пользователей, кешировать этот список, выводить их на экран. Так же по выбранному пользователю надо запрашивать доступные балансы – их кешировать уже нет необходимости. Для обоих списков должна быть предусмотрена возможность обновления по нажатию кнопки.

Приложение должно содержать одно Activity, в котором находятся два Fragment – на телефоне они сменяют друг друга, а на планшете один находится слева, а другой справа на экране. Первый фрагмент (левый на планшете) должен отображать фамилии и имена пользователей из соответствующего запроса в ListView, данные запроса должны кешироваться, используя ContentProvider и SQLite базу данных. Данные должны запрашиваться автоматически, если в кеше пусто, либо принудительно – по нажатию на кнопку «обновить». Если же в кеше были какие-либо данные, выполнять запрос автоматически не надо – следует наполнять RecyclerView из базы данных. По нажатию на пользователя в RecyclerView следует открывать второй Fragment, либо, в случае планшета, просто заменять правый Fragment на новый, в котором выводятся балансы выбранного пользователя.

Во втором Fragment необходимо выводить балансы выбранного в первом Fragment пользователя, точно так же – в RecyclerView, по балансу на строчку. Так же, как и в первом Fragment данные должны запрашиваться автоматически, но без кеширования, плюс должна быть возможность нажать на кнопку «обновить», чтобы перезагрузить данные. Балансы должны выводиться в user-friendly виде, то есть, например 100 руб. или $1000.

Кнопка обновить должна находиться всегда в начале списка в обоих RecyclerView.

Если в процессе загрузки возникает какая-либо ошибка, необходимо вместо RecyclerView отобразить в центре Fragment текст ошибки и под ним кнопку «повторить», которая еще раз запросит данные с сервера.

При загрузке любых данных необходимо отображать ProgressView.

Очень желательно Использовать RxJava, Retrofit Плюсом будет использование Dagger 2 и MVP парадигмы

Протокол

Сообщение об ошибке:

{

"result_code": 300,

"message" : "Текст ошибки"

}

result_code - код ошибки - всегда положительная цифра, при этом если код равен нулю, значит ошибки нет и запрос прошел успешно. Поле message содержит текст ошибки, в случае если ошибка нулевая, этого сообщения не будет.

Список пользователей: GET запрос по адресу https://w.qiwi.com/mobile/testtask/index.json

{

"result_code": 0,

"users": [

{

"id": 0,

"name": "Marisa"

},

{

"id": 1,

"name": "Madeline"

}

]

}

Где id - идентификатор пользователя, name - имя.

Балансы пользователей: GET запрос по адресу https://w.qiwi.com/mobile/testtask/users/<id>/index.json где вместо <id> передается идентификатор пользователя из предыдущего запроса.

{

"result_code": 0,

"balances": [

{

"currency": "RUB",

"amount": 1428.48

},

]

}

Где currency - валюта баланса в стандарте ISO4217 (http://ru.wikipedia.org/wiki/ISO_4217), а amount - доступные средства в этой валюте.
